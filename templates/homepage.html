{% extends 'base.html' %}
{% block title %}Homepage{% endblock %}

{% block content %}
  <h1> Hello! Welcome to the homepage! </h1>

  {% if not session.get('user_id') %}
  <h3> To start searching and saving recipes enter your email and password! 
  </h3>
  <div id="login">
    {# <form action="/login" method="POST" id="login-form"> #}
      <label> Email </label>
      <input type="text" id="email">

      <label> Password </label>
      <input type="text" id="password">

      <input type="submit" id="login-btn">
    {# </form> #}
  </div>
  {% endif %}


  {% if session.get('user_id') %}
  <div id="search">
    <form action="/search_results" method="POST">
      <p>
        What's in your fridge?

        <input type="text" id="user_ingredients">
      </p>
      <input type="submit">
    </form>
  </div>

  <div id="logout">
    <form action="/logout">
      <button id="logout-btn">Log Out</button>
    </form>
  </div>
  {% endif %}

{% endblock %}

{% block js %}
<script>
  $('#login-btn').on('click', (evt) => {
    // on submission of login form, prevent default

    const email = $('#email').val();
    const password = $('#password').val();
    console.log(email, password);

    // get email and password from form.
    const loginData = {
      email: email,
      password: password
    };
    console.log(loginData);

    $.post('/login', loginData, (res) => {
      console.log(res.success);
    })
  });


</script>
{% endblock %} 